<!--suppress JSUnresolvedVariable -->
<mat-sidenav-container>

  <mat-sidenav #sidenav [mode]="position" class="mat-elevation-z4">
    <mat-toolbar>
      <mat-toolbar-row>
        <div class="vc-top-logo"></div>
      </mat-toolbar-row>
    </mat-toolbar>

    <mat-accordion>
      <div *ngFor="let item of routes">
        <mat-expansion-panel *ngIf="item.pages.length === 0" class="mat-elevation-z0" hideToggle [id]="item.link">
          <mat-expansion-panel-header>
            <mat-panel-title>
              <mat-nav-list>
                <a mat-list-item (click)="menuClicked(true)"
                   [routerLink]="getRouterLink(item.link)"
                   [routerLinkActive]="['is-active']">

                  <san-icon
                    [type]="item.iconType"
                    [icon]="item.icon"
                    [faSpin]="activeRoute.includes(item.link)"
                    [faIconStyles]="getIconStyle(activeRoute.includes(item.link))">
                  </san-icon>

                  {{item.name|translate}}
                </a>
              </mat-nav-list>
            </mat-panel-title>
          </mat-expansion-panel-header>
        </mat-expansion-panel>

        <!-- use expansion panel for heading item with sub page links -->
        <mat-expansion-panel *ngIf="item.pages.length > 0" class="mat-elevation-z0" hideToggle [id]="item.link" #expansion>
          <mat-expansion-panel-header>
            <mat-icon class="chevron">
              {{ expansion.expanded ? 'keyboard_arrow_down' : 'keyboard_arrow_right' }}
            </mat-icon>
            <mat-panel-title>
              <mat-nav-list>
                <a mat-list-item (click)="menuClicked(false)" [class.is-active]="activeRoute.includes(item.link)">

                  <san-icon
                    [type]="item.iconType"
                    [icon]="item.icon"
                    [faSpin]="activeRoute.includes(item.link)"
                    [faIconStyles]="getIconStyle(activeRoute.includes(item.link))">
                  </san-icon>

                  {{item.name|translate}}
                </a>
              </mat-nav-list>
            </mat-panel-title>
          </mat-expansion-panel-header>

          <div class="nav-section">
            <mat-nav-list>
              <a mat-list-item *ngFor="let navPage of item.pages" [id]="navPage.id" (click)="menuClicked(true)"
                 [routerLink]="getRouterLink(navPage.link)" [routerLinkActive]="['is-active']">

                <san-icon
                  [type]="navPage.iconType"
                  [icon]="navPage.icon"
                  [faSpin]="activeRoute.includes(navPage.link)"
                  [faIconStyles]="getIconStyle(activeRoute.includes(navPage.link))">
                </san-icon>

                {{ navPage.name|translate }}
              </a>
            </mat-nav-list>
          </div>

        </mat-expansion-panel>
      </div>

      <mat-expansion-panel fxHide.gt-xs class="mat-elevation-z0" hideToggle>
        <mat-expansion-panel-header>
          <mat-panel-title>
            <mat-nav-list>
              <mat-divider [vertical]="false"></mat-divider>
              <a mat-list-item (click)="responsiveLogout()">
                <mat-icon class="logout-icon" matListIcon>logout</mat-icon>
                Logout
              </a>
            </mat-nav-list>
          </mat-panel-title>
        </mat-expansion-panel-header>
      </mat-expansion-panel>

    </mat-accordion>

  </mat-sidenav>

  <mat-sidenav-content>
    <mat-progress-bar *ngIf="loading"  mode="determinate" [value]="value"></mat-progress-bar>

    <san-toolbar></san-toolbar>

    <div class="mat-sidenav-content-div">

      <router-outlet></router-outlet>

    </div>

  </mat-sidenav-content>

</mat-sidenav-container>
